# ScholarRAGï¼šåŸºäºçŸ¥è¯†å›¾è°±å¢å¼ºçš„ç§‘ç ”ç»¼è¿°åŠ©æ‰‹

ScholarRAG æ˜¯ä¸€ä¸ªé’ˆå¯¹å­¦æœ¯ç§‘ç ”åœºæ™¯è®¾è®¡çš„ RAG (æ£€ç´¢å¢å¼ºç”Ÿæˆ) å·¥å…·ã€‚å®ƒä¸åŒäºä¼ ç»Ÿçš„åŸºäºæ–‡æœ¬åˆ‡ç‰‡çš„ RAGï¼Œè€Œæ˜¯åˆ©ç”¨ OpenAlex çš„å€’æ’ç´¢å¼•é‡æ„æ‘˜è¦ï¼Œå¹¶ç»“åˆ å­¦æœ¯æ¦‚å¿µæ ‘ (Concept Graph) è¿›è¡ŒæŸ¥è¯¢æ‰©å±•ï¼Œæœ€ç»ˆåˆ©ç”¨ LLM ç”Ÿæˆé«˜è´¨é‡çš„æ–‡çŒ®ç»¼è¿°ã€‚


## é¡¹ç›®ç»“æ„ï¼š
```txt
scholar_rag/
â”œâ”€â”€ config/                 # [é…ç½®] ç³»ç»Ÿå‚æ•°ä¸æç¤ºè¯
â”‚   â”œâ”€â”€ settings.yaml       # API é‚®ç®±ã€æ¨¡å‹å‚æ•°ã€æ£€ç´¢æ¡æ•°é…ç½®
â”‚   â””â”€â”€ prompts.yaml        # (é¢„ç•™) RAG çš„ Prompt æ¨¡æ¿ç®¡ç†
â”œâ”€â”€ data/                   # [æ•°æ®] æ•°æ®æŒä¹…åŒ– (Git Ignore)
â”‚   â”œâ”€â”€ cache/              # API è¯·æ±‚ç¼“å­˜
â”‚   â””â”€â”€ vector_store/       # (è§„åˆ’ä¸­) å‘é‡æ•°æ®åº“æ–‡ä»¶
â”œâ”€â”€ src/                    # [æºç ] æ ¸å¿ƒä»£ç é€»è¾‘
â”‚   â”œâ”€â”€ core/               # >> LLM äº¤äº’æ ¸å¿ƒ
â”‚   â”‚   â”œâ”€â”€ llm.py          # OpenAI/DeepSeek æ¥å£å°è£…
â”‚   â”‚   â””â”€â”€ generator.py    # ç»¼è¿°ç”Ÿæˆé€»è¾‘ä¸ Prompt ç»„è£…
â”‚   â”œâ”€â”€ retrieval/          # >> æ£€ç´¢å±‚ (Strategy Pattern)
â”‚   â”‚   â”œâ”€â”€ base.py         # æ£€ç´¢å™¨æŠ½è±¡åŸºç±»
â”‚   â”‚   â”œâ”€â”€ acemap.py       # (å¯é€‰) Acemap æ¥å£å®ç°
â”‚   â”‚   â””â”€â”€ openalex.py     # âœ… OpenAlex API å°è£…ä¸æ‘˜è¦é‡æ„
â”‚   â”œâ”€â”€ graph/              # >> å›¾ç®—æ³•å±‚
â”‚   â”‚   â”œâ”€â”€ expansion.py    # åŸºäº Concept æ ‘çš„æŸ¥è¯¢æ‰©å±•
â”‚   â”‚   â””â”€â”€ ranking.py      # (è§„åˆ’ä¸­) åŸºäºå¼•æ–‡ç½‘ç»œçš„é‡æ’åº
â”‚   â””â”€â”€ utils/              # >> å·¥å…·å‡½æ•°
â”‚       â””â”€â”€ logger.py       # æ—¥å¿—æ¨¡å—
â”œâ”€â”€ tests/                  # å•å…ƒæµ‹è¯•
â”œâ”€â”€ .env                    # ç¯å¢ƒå˜é‡ (API Key) - ä¸è¦ä¸Šä¼ åˆ° GitHub
â”œâ”€â”€ main.py                 # CLI å¯åŠ¨å…¥å£
â”œâ”€â”€ requirements.txt        # Python ä¾èµ–åˆ—è¡¨
â””â”€â”€ README.md               # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

## ç¯å¢ƒé…ç½® Windows + Conda
```bash
conda create -n scholar_rag python=3.10

conda activate scholar_rag

pip install -r requirements.txt #åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œ
```

## é…ç½®æ–‡ä»¶
A. è®¾ç½® API Key (.env)
åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ªåä¸º .env çš„æ–‡ä»¶ï¼ˆæ— åç¼€ï¼‰ï¼Œå¡«å…¥æ‚¨çš„ LLM å¯†é’¥ï¼š
```bash
# .env æ–‡ä»¶å†…å®¹

# æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨ OpenAI
OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# æ–¹æ¡ˆäºŒï¼šä½¿ç”¨ DeepSeek (æ¨èï¼Œæ›´ä¾¿å®œä¸”é€‚åˆå­¦æœ¯)
# OPENAI_API_KEY=sk-xxxxxxxx (DeepSeek Key)
# OPENAI_BASE_URL=https://api.deepseek.com
```

B. è®¾ç½® OpenAlex é‚®ç®± (config/settings.yaml)
OpenAlex è¦æ±‚æä¾›é‚®ç®±ä»¥è¿›å…¥â€œç¤¼è²Œæ± â€ï¼ˆæ›´å¿«çš„è¯·æ±‚é€Ÿåº¦ï¼‰ã€‚ä¿®æ”¹ config/settings.yamlï¼š
```bash
openalex:
  email: "your_email@example.com"  # <--- è¯·æ›¿æ¢ä¸ºæ‚¨çš„çœŸå®é‚®ç®±
```

## å¯åŠ¨å‘½ä»¤
æœ¬é¡¹ç›®é€šè¿‡å‘½ä»¤è¡Œæ¥å£ (CLI) è¿è¡Œã€‚

1. åŸºç¡€æ¨¡å¼ (å…³é”®è¯æ£€ç´¢)
ç›´æ¥ä½¿ç”¨å…³é”®è¯åœ¨ OpenAlex ä¸­æ£€ç´¢å¹¶ç”Ÿæˆç»¼è¿°ï¼š
```bash
python main.py --query "Large Language Models in Healthcare"
```
2. å›¾å¢å¼ºæ¨¡å¼ (æ¨è)
å¯ç”¨çŸ¥è¯†å›¾è°±æ‰©å±•åŠŸèƒ½ã€‚ç³»ç»Ÿä¼šè‡ªåŠ¨å®šä½è¯¥ Query æ‰€å±çš„ OpenAlex æ¦‚å¿µèŠ‚ç‚¹ (Concept Node)ï¼Œå¹¶åœ¨æ­¤æ¦‚å¿µå­å›¾ä¸­è¿›è¡Œç²¾å‡†æ£€ç´¢ï¼Œæ’é™¤åŒåå¼‚ä¹‰è¯çš„å¹²æ‰°ï¼š
```bash
python main.py --query "Machine Learning" --use_graph
```

## æ¨¡å—èŒè´£è¯¦ç»†è§£é‡Š

1. src/retrieval/ (æ£€ç´¢å±‚)
è¿™æ˜¯æ•°æ®çš„æ¥æºã€‚

openalex.py: æœ¬é¡¹ç›®çš„æ ¸å¿ƒå¼•æ“ã€‚

æ‘˜è¦é‡æ„: OpenAlex ä¸ºäº†ç‰ˆæƒä¸ç›´æ¥å­˜å‚¨æ‘˜è¦æ–‡æœ¬ï¼Œè€Œæ˜¯å­˜å‚¨ Inverted Index (å€’æ’ç´¢å¼•)ã€‚è¯¥æ¨¡å—è´Ÿè´£å°†å€’æ’ç´¢å¼•è¿˜åŸä¸ºå¯è¯»çš„æ‘˜è¦æ–‡æœ¬ï¼Œè¿™æ˜¯ RAG èƒ½å¦è¿›è¡Œçš„å…³é”®ã€‚

åŠ¨æ€æ£€ç´¢: å®æ—¶è°ƒç”¨ APIï¼Œæ”¯æŒæŒ‰ Relevance (ç›¸å…³æ€§) æˆ– Cited_by_count (å¼•ç”¨é‡) æ’åºã€‚

2. src/graph/ (å›¾å¢å¼ºå±‚)
è¿™æ˜¯é¡¹ç›®çš„â€œå¤§è„‘â€æ‰©å±•éƒ¨åˆ†ã€‚

expansion.py: åˆ©ç”¨ OpenAlex çš„ Ontology (æœ¬ä½“è®º) ç»“æ„ã€‚

ä¾‹å¦‚è¾“å…¥ "Transformer"ï¼Œå®ƒèƒ½è¯†åˆ«è¿™æ˜¯ "Deep Learning" ä¸‹çš„ä¸€ä¸ªæ¶æ„ï¼Œè€Œä¸æ˜¯ç”µæ°”å·¥ç¨‹é‡Œçš„â€œå˜å‹å™¨â€ã€‚

å®ƒè¿”å› Concept IDï¼Œå¼ºåˆ¶æ£€ç´¢å±‚åªåœ¨è¯¥ ID çš„å­å›¾ä¸­æœç´¢ã€‚

3. src/core/ (ç”Ÿæˆå±‚)
è¿™æ˜¯ RAG çš„è¾“å‡ºç«¯ã€‚

generator.py: è´Ÿè´£ Prompt Engineeringã€‚å®ƒå°†æ£€ç´¢åˆ°çš„ Top-K è®ºæ–‡çš„å…ƒæ•°æ®ï¼ˆæ ‡é¢˜ã€å¹´ä»½ã€æ‘˜è¦ï¼‰ç»„è£…æˆ Contextï¼Œå¹¶æŒ‡ç¤º LLM ç”Ÿæˆç»¼è¿°ã€‚

llm.py: ç»Ÿä¸€çš„ LLM è°ƒç”¨æ¥å£ï¼Œå…¼å®¹ OpenAI æ ¼å¼çš„ API (åŒ…æ‹¬ DeepSeek, Moonshot ç­‰)ã€‚

## ğŸ“ å¼€å‘è®¡åˆ’ (Roadmap)
[x] MVP: åŸºç¡€æ£€ç´¢ + æ‘˜è¦è¿˜åŸ + ç®€å•ç»¼è¿°ç”Ÿæˆ

[x] Graph: åŸºäº Concept çš„ Query Expansion

[ ] Vector Store: å¼•å…¥ ChromaDB/LanceDBï¼Œæ”¯æŒæœ¬åœ°å‘é‡åŒ–å­˜å‚¨ï¼Œé¿å…é‡å¤ API è°ƒç”¨

[ ] Citation Graph: åŸºäºå¼•æ–‡ç½‘ç»œï¼ˆPageRankï¼‰å¯¹æ£€ç´¢ç»“æœè¿›è¡ŒäºŒæ¬¡é‡æ’åº

[ ] Web UI: åŸºäº Streamlit çš„å¯è§†åŒ–ç•Œé¢

## âš ï¸ æ³¨æ„äº‹é¡¹
OpenAlex é€Ÿåº¦: å¦‚æœä¸é…ç½®é‚®ç®±ï¼Œè¯·æ±‚å¯èƒ½ä¼šæœ‰å»¶è¿Ÿæˆ–è¢«é™æµã€‚

LLM æˆæœ¬: ç”Ÿæˆä¸€ç¯‡ç»¼è¿°å¤§çº¦æ¶ˆè€— 2k-4k Tokenï¼Œè¯·å…³æ³¨ API ä½™é¢ã€‚

ç½‘ç»œé—®é¢˜: å¦‚æœåœ¨ä¸­å›½å¤§é™†åœ°åŒºä½¿ç”¨ OpenAIï¼Œè¯·ç¡®ä¿ç»ˆç«¯é…ç½®äº†é€‚å½“çš„ä»£ç†ç¯å¢ƒã€‚